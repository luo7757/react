# 生命周期
生命周期：组件从诞生到销毁会经历一系列的过程，该过程就叫做生命周期，React 在组件的生命周期中提供了一系列的钩子函数（类似于事件），可以让开发者在函数中注入代码，这些代码会在适当的时候运行

**生命周期目前仅存在于类组件中，函数组件每次调用都是重新运行函数，旧的组件即刻被销毁，函数组件的生命周期在后续hooks中会学习到**

## 旧版生命周期 React < 16.0.0
1. constructor:创建阶段
   1. 同一个组件对象只会创建一次
   2. 不能在第一次挂在到页面之前，调用setState，为了避免问题，严禁在构造函数中使用setState之类
2. componentWillMount：挂载阶段（移除）
   1. 和构造函数一样，只会运行一次（特殊情况可能会运行多次）
   2. 可以使用setState，但是为了避免Bug，不建议使用，因为在某些特殊情况下，该函数可能被调用多次（组件创建时，可能会被打断
      ，重新渲染，导致多次渲染，再是服务端渲染，服务端会运行一次，客户端也会运行一次）在新版中被移除了
3. **render**：完成虚拟DOM构建
   1. 返回一个虚拟DOM，会被挂在到虚拟DOM树中，最终渲染到页面的真实DOM中
   2. render 可能不止运行一次，只要需要重新渲染，就会重新运行
   3. 严禁使用在render中使用 setState，可能会导致无限递归渲染
4. **componentDidMount**：挂载成为真实DOM后运行，
   1. 只会运行一次
   2. 可以使用setState
   3. 通常情况下，会将网络请求，启动计时器等一开始需要的操作，书写到该函数中
5. 组件进入活跃状态
6. componentWillReceiveProps（移除） 属性发生改变前
   1. 即将接收新的属性值
   2. 参数为新的属性对象
   3. 该函数可能会导致一些bug，所以不推荐使用
7. **showldComponentUpdate** ： 组件是否重新渲染
   1. 指示React是否要重新渲染该组件，通过返回true或false来指定
   2. 默认情况下，直接返回true
8. componentWillUpdate（移除） ： 组件即将被重新渲染
9. componentDidUpdate ：组件销毁
   1.  往往在该函数中使用DOM操作，改变元素
10. **componentWillUnmount**
    1.  通常在该函数中销毁一些组件依赖的资源，比如计时器



## 新版生命周期 React >= 16.0.0
1. getDerivedStateFromProps
   1. 通过参数可以获取新的属性和状态
   2. 该函数是静态的
   3. 该函数的返回值会覆盖掉组件状态
   4. 该函数几乎是没有什么用
2. getSnapshotBeforeUpdate
   1. 真实dom树构建完成了，但还未实际渲染到页面中。
   2. 在该函数中，通常用于实现一些附加的dom操作
   3. 该函数的返回值，会作为componentDidUpdate的第三个参数