# React中的事件

这里的事件：React内置的DOM组件中的事件
1. 给document注册事件
2. 几乎所有的元素的事件处理，均在document的事件中处理
   1. 一些不冒泡的事件，是直接的真实元素上监听
   2. 一些document上面的没有的事件，只能在元素上监听
3. 在document的事件处理，react会根据虚拟dom树的完成事件函数的调用
4. 在React中的事件，最终都是在document中注册的 运行也是在事件冒泡到document 中后才会运行
5. React的事件参数，并非真实的DOM事件参数，是React合成的一个对象，该对象类似于真实DOM的事件参数
   1. stopPropagation，阻止的是事件在虚拟dom树中的冒泡
   2. 通过 e.nativeEvent 获得真实的DOM对象
   3. 为了提高执行效率，React使用事件对象池来处理事件对象

**注意事项**

1. 如果给真实的DOM注册事件，阻止了事件冒泡，则会导致React的相应事件无法触发
2. 如果给真实的DOM注册事件，事件会先于React事件先运行
3. 通过React中的事件参数e来阻止事件冒泡，无法阻止真实的DOM事件
4. 可以用过 e.nativeEvent.stopImmediatePropagation() 来阻止document上剩余事件的运行
5. 在事件处理程序中，不要异步的使用事件对象（在React中e对象会被重用），如果一定要使用，就调用 e.persist() 函数对e进行持久化（好像在新版中自动完成了持久化）