# 渲染原理 在app.jsx 中查看代码

渲染：生成用于显示的对象，以及将这些对象形成真实DOM元素

- React元素：React Elment，通过React.createElement创建(语法糖：JSX)
  - 例如：在render中的使用JSX书写的标签就会转为 React 元素
    - ```<div><h1></h1></div>``` React 标签元素
    - ```<App />``` React 组件
- React节点：装门用于渲染到UI界面的对象，React会通过React元素，创建React节点,ReactDOM一定是通过React节点来进行渲染的
  - 节点类型：
    - React DOM节点（ReactDOMComponent）：创建该节点的React元素类型是一个字符串
    - React 组件节点（Componsite：混合节点）：创建该节点的React元素类型是一个函数或是一个类 
    - React TextNode节点：由字符串、数字创建的节点
    - React empty节点：由null、undefined、false、true创建的节点
    - React 数组节点：该节点由一个数组创建
- 真实DOM：通过document.createElement创建的dom元素


## 首次渲染（新节点渲染）
1. 通过参数的值创建节点
2. 根据不同的节点，做不同的事情
   1. TextNode：通过document.createTextNode 创建真实的文本节点
   2. 空节点：什么都不做，但react dom树中存在，真实dom中不存在
   3. 数组节点：遍历数组，将数组每一项递归创建节点（回到第一步进行反复操作，直到遍历结束）
   4. DOM 节点：通过document.createElement创建真实DOM对象，然后遍历对应React元素的child属性，递归操作（回到第一步进行反复操作，直到遍历结束）
   5. 组件节点：
      1. 函数组件：调用函数（该函数必须返回一个可以生成节点的内容），将该函数的返回结果，递归生成节点，直到遍历结束
      2. 类组件：
         1. 创建该类的实例
         2. 立即调用对象的生命周期方法: static getDerivedStateFromProps
         3. 运行该对象的 render 方法，拿到节点对象（将该节点递归操作，回到第一步进行反复操作，直到遍历结束）
         4. 将该组件的componentDidMount加入到执行队列（先进先出），当整个虚拟dom树全部构建完毕，并且将真实的DOM对象挂载到容器之后，运行该对列中的函数
3. 生成出虚拟DOM树之后，将该树保存起来，以便后续使用
4. 将之前生成的真实dom对象，添加到挂载容器中

## 首次渲染（更新节点）