# 路由信息
Router 组件会创建一个上下文，并且，向上下文中注入一些信息

该上下文对开发者是隐藏的， Route组件若匹配到了地址，则会将这些上下文中的信息作为属性传递如对应的组件

## history （V6 useNavigate）
他并不是window.history 对象，我们利用该对象无刷新跳转地址

**为什么没有直接使用history对象**

1. React-Router中有两种模式：Hash、History，如果直接使用window.history，只能支持一种模式
2. 当使用window.history.pushState方法时，没有办法收到任何通知，将导致React无法知道地址发生来变化，导致组件无法刷新

- push：将某个新的地址入栈（历史记录栈）
  - 参数1： 新的地址(只能是相对路径)
  - 参数2： 跳转后附带的状态数据，可选
- replace： 将某个新的地址替换当前栈中的地址
- go
- forward
- back

## location（V6 useLocation)
与history.location 完全一致，与window.location 不同

location对象中记录了当前地址的相关信息

通常我们使用```query-string```这个库来处理seach/hash等参数，在location中获取的参数都是字符串，但我们一般是需要一个对象，这个库就是用来将search/hash字符串转为对象


## match （在v6 中 useParams 提供了相关数据）

该对象中保存了路由匹配的信息
- isExact：事实上，当前的路径和路由配置的路径是否是精确匹配的
- params：获取路径规则中对应的数据

实际上，在Route组件中的path属性，可以书写一个```string pattern```， 字符串正则 不是正则，比正则简单，也少了许多功能
```<Route path="/news/:year/:month/:day"></Route>```

```/:year(\d+)/:month(\d+)/:day(\d+)  正则约束 必须是 d+ 数字```

```/:year(\d+)/:month(\d+)/:day(\d+)/*?  *代表匹配任意字符 ？可选```

上面的功能都是 Path-to-RegExp 库进行实现的，该库的作用是将一个字符串转换成一个真正的正则表达式

path中还可以写一个数组，数组中的每一项都是一个正则，匹配的都可以成功渲染component/element 的组件

**向某个页面传递数据的方式**
1. 使用state：在push页面时，加入state
2. **利用search：把数据填写到地址栏中的 ? 后**
3. 利用hash：把数据填写到hash后
4. **利用params：把数据填写到路径中**

```/news?year=2022&month=4&day=29```

```/news/2022/4/29```


## 非路由组件使用路由信息 v5 

**在 v6 中 使用 useXXXX函数 返回当前页面路由信息，不存在这样的问题**

某些组件并没有直接放在Route中，而是嵌套在其他普通组件中，因此，它的props中没有路由信息

可以使用下面两中方式
1. 将路由信息一层一层向下传递即可
2. 使用react-router提供的高阶组件withRouter，包装要使用的组件，该高阶组件可以为其提供路由信息